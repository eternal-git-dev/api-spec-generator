# Automatic API Documentation and Client Generator
Генерация API-документации и к API-клиента из исходного кода с помощью LLM. Система выполняет статический анализ Python-проекта, извлекает структуру HTTP-маршрутов, параметры, сигнатуры функций и внутренние зависимости, преобразует их в промежуточное представление (IR), а после генерирует API-клиент и спецификацию OpenAPI 3.0.
# Основные возможности
* Статический анализ кода
* Универсальный промежуточный формат - совместим с разными языками
* RAG-подход
* Поддержка локальной и удаленной генерации
* Автоматическая генерация
* Поддерживает польностью оффлайн вариант работы

# Архитектура
* Parser (AST)
Статических анализ исходного кода методов и извлечение марштрутов, сигнатур, аргументов, возвращаемых значений, вызовов.
* IR + RAG
Унифицированная модель описания эндпоита, независимая от языка программирования, а также фрагмент кода для лучшего ответа LLM
* LLM (Local / Remote)
Интерфейс для генерации описания методов. Поддерживается
  * локальная модель
  * удаленная модель (API)
* OpenAPI generator
На основе полученного Enriched IR генерирует YAML файл
* API-client generator
На основе полученного Enriched IR генерирует готовый API-клиент с добавленной документации к методам

Архитектурной диаграмма:

<p align="center">
  <img width="512" height="891" alt="Image" src="https://github.com/user-attachments/assets/ce70388d-af50-4ef9-86be-b876a5b0e58e" />
</p>

___
# Описание основых модулей
* src/parser.py - Анализирует исходный код и извлекает информации об эндпоинтах. Поддерживает парсинг одного или нескольких файлов. Для работы используется модуль ```ast```
  Основные возможности:
  * Определение маршрутов
  * Анализ сигнатуры функций
  * Извлечение вызовов
* src/services/serviceGeneration.py - Модуль управления LLM. Инкапсулирует логилку подготовки сообщений с двумя реализациями генерации - локальная и удаленная
* src/orchestrator.py - Модуль координации, объеденяет подсистемы проекта
* src/remoteLLM.py - Модуль реализует функционал для удаленной генерации ответов через API. 
* src/localLLM.py - Модуль реализует функционал для локальной генерации ответов. Для работы используется модуль ```transformers``` и ```pyTorch```

# Установка
Для удаленной генерации потребуется установить [API ключ](https://openrouter.ai/) в .env окружение
1. Установите [Python](https://www.python.org/) версси 3.12+
2. Установите [pipx](https://pipx.pypa.io/stable/installation/)
3. Установите Poetry:
```bash
pipx install poetry
```
# Запуск
Вход выполняется через main.py. Для простоты работы можно использовать Makefile:
* Запуск в автоматическом режиме
```bash
make run
```
* Запуск с локальной LLM
```bash
make run-local
```
# Запуск с удалённой LLM
```bash
make run-remote
```
# Параметры командной строки
Скрипт принимает следующие флаги:
* ```--path``` - Корневая директория для поиска файлов
* ```--patterns``` - Паттерны файлов для сканирования (Например, .py)
* ```--mode``` - Режим работы LLM: local, remote, auto
* ```--o``` - Директория сохранения результатов
## Пример запуска вручную
```bash
poetry run python src/main.py \
    --path ./example_project \
    --patterns "*.py" \
    --mode auto \
    --o output
```
# Выходные данные
В папке выхода создаются:
* Сгенерированные API-клиенты
* YAML файлы с описанием методов
# Пример работы проекта
В качестве входных данных был взят [API](https://github.com/kispython-ru/dta/blob/main/webapp/views/api.py) на flask

Результат работы:
* Созданный API-клиент:

<img width="1483" height="866" alt="Image" src="https://github.com/user-attachments/assets/2540b42e-212d-4a9d-b157-85e452799b91" />

* Созданный файл с нотацией:

<img width="600" height="838" alt="Image" src="https://github.com/user-attachments/assets/30f888cc-1ad6-4267-a84d-d537b28d90e8" />
